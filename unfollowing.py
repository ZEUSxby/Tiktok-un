
# Encode File BY : ChatGPT
import sys, os, base64

PYTHON_VERSION = ".".join(sys.version.split()[0].split(".")[:-1])

if PYTHON_VERSION != '3.13':
    print("[!] Python sürümü uyumsuz")
    exit(0)

payload = 'I9mF2LPZhdmI2K0g2KrYutmK2LEg2K3ZgtmI2YIg2KjYsyDYutmK2LEg2YXYqNix2Yog2KfZhNiw2YXYqSDYp9iw2Kcg2KrYqNi52YrYqQojQFFRWjk5CmltcG9ydCB0ZWxlYm90CmZyb20gdGVsZWJvdC50eXBlcyBpbXBvcnQgSW5saW5lS2V5Ym9hcmRNYXJrdXAsIElubGluZUtleWJvYXJkQnV0dG9uCmltcG9ydCByZXF1ZXN0cwppbXBvcnQgcmFuZG9tCmltcG9ydCBqc29uCmltcG9ydCBTaWduZXJQeQppbXBvcnQgdGhyZWFkaW5nCmltcG9ydCBxdWV1ZQppbXBvcnQgcmUKaW1wb3J0IGNvbmN1cnJlbnQuZnV0dXJlcwppbXBvcnQgdGltZQoKQk9UX1RPS0VOID0gIjgyNjk1OTk5NTk6QUFHTGlVSi13UzdLbE9uMlEtT1MxeGx1c1FRV0VocDdBQjgiCgpib3QgPSB0ZWxlYm90LlRlbGVCb3QoQk9UX1RPS0VOKQpERVZFTE9QRVJfVVNFUk5BTUUgPSAiQEJZX1pldVN4IiAgCgppbXBvcnQgdGhyZWFkaW5nCmltcG9ydCB0aW1lCgpLQU5BTF9VU0VSTkFNRSA9ICJAQnl6ZXVzeFRvb2xtYWluIiAgIyBLYW5hbCBrdWxsYW7EsWPEsSBhZMSxIChAIGlsZSkKS0FOQUxfTElOSyA9ICJodHRwczovL3QubWUvQnl6ZXVzeFRvb2xtYWluIiAgIyBLYW5hbMSxbiBkaXJla3QgbGlua2kKCmRlZiBrdWxsYW5pY2lfa29udHJvbChjaGF0X2lkKToKICAgICIiIkt1bGxhbsSxY8SxbsSxbiBrYW5hbGEgw7x5ZSBvbHVwIG9sbWFkxLHEn8SxbsSxIGtvbnRyb2wgZWRlci4gVHJ1ZS9GYWxzZSBkw7ZuZXIuIiIiCiAgICB0cnk6CiAgICAgICAgbWVtYmVyID0gYm90LmdldF9jaGF0X21lbWJlcihjaGF0X2lkPUtBTkFMX1VTRVJOQU1FLCB1c2VyX2lkPWNoYXRfaWQpCiAgICAgICAgcmV0dXJuIG1lbWJlci5zdGF0dXMgaW4gWyJtZW1iZXIiLCAiYWRtaW5pc3RyYXRvciIsICJjcmVhdG9yIl0KICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgcmV0dXJuIEZhbHNlCgpAYm90Lm1lc3NhZ2VfaGFuZGxlcihjb21tYW5kcz1bJ3N0YXJ0J10pCmRlZiBzdGFydChtZXNzYWdlKToKICAgIGNoYXRfaWQgPSBtZXNzYWdlLmNoYXQuaWQKICAgIGJvdF9tZXNzYWdlID0gYm90LnNlbmRfbWVzc2FnZShjaGF0X2lkLCAi4o+zIEthbmFsYSBrYXTEsWzEsW0ga29udHJvbCBlZGlsaXlvci4uLiIpCgogICAgZGVmIGtvbnRyb2xfdmVfZ3VuY2VsbGUoKToKICAgICAgICB0aW1lLnNsZWVwKDIpICAjIDIgc2FuaXllIGJla2xlCiAgICAgICAgaWYga3VsbGFuaWNpX2tvbnRyb2woY2hhdF9pZCk6CiAgICAgICAgICAgICMgS3VsbGFuxLFjxLEga2FuYWxhIMO8eWV5c2UgbWVuw7x5w7wgZ8O2c3RlcgogICAgICAgICAgICBib3QuZWRpdF9tZXNzYWdlX3RleHQoCiAgICAgICAgICAgICAgICBjaGF0X2lkPWNoYXRfaWQsCiAgICAgICAgICAgICAgICBtZXNzYWdlX2lkPWJvdF9tZXNzYWdlLm1lc3NhZ2VfaWQsCiAgICAgICAgICAgICAgICB0ZXh0PSLinIUgS2FuYWxhIMO8eWVzaW5pei4gTWVuw7xkZW4gc2XDp2ltIHlhcGFiaWxpcnNpbml6OiIsCiAgICAgICAgICAgICAgICByZXBseV9tYXJrdXA9bWFpbl9tZW51KCkgICMgU2VuaW4gbWVuw7wgZm9ua3NpeW9udW4KICAgICAgICAgICAgKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgS3VsbGFuxLFjxLEga2FuYWxhIMO8eWUgZGXEn2lsc2Ugc2FkZWNlIGthbmFsIGxpbmtpbmkgZ8O2c3RlcgogICAgICAgICAgICBib3QuZWRpdF9tZXNzYWdlX3RleHQoCiAgICAgICAgICAgICAgICBjaGF0X2lkPWNoYXRfaWQsCiAgICAgICAgICAgICAgICBtZXNzYWdlX2lkPWJvdF9tZXNzYWdlLm1lc3NhZ2VfaWQsCiAgICAgICAgICAgICAgICB0ZXh0PWYi4p2MIEJvdHUga3VsbGFuYWJpbG1layBpw6dpbiDDtm5jZSBrYW5hbGEga2F0xLFsbWFsxLFzxLFuxLF6Llxu4p6h77iPIHtLQU5BTF9MSU5LfSIKICAgICAgICAgICAgKQoKICAgIHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWtvbnRyb2xfdmVfZ3VuY2VsbGUpLnN0YXJ0KCkKCnVzZXJfc3RhdGVzID0ge30KdXNlcl9zZXNzaW9ucyA9IHt9CnVzZXJfYWN0aW9ucyA9IHt9CnVzZXJfdGhyZWFkcyA9IHt9CmRldmljZV9pZCA9IHN0cihyYW5kb20ucmFuZGludCgxMCoqMTgsIDEwKioxOSAtIDEpKQpzYXlpZCA9IHJlcXVlc3RzLnNlc3Npb24oKQoKCmRlZiBtYWluX21lbnUoKToKICAgIG1hcmt1cCA9IElubGluZUtleWJvYXJkTWFya3VwKHJvd193aWR0aD0yKQogICAgbWFya3VwLmFkZCgKICAgICAgICBJbmxpbmVLZXlib2FyZEJ1dHRvbigiVmlkZW9sYXLEsSBHaXpsZSIsIGNhbGxiYWNrX2RhdGE9Im1ha2VfcHJpdmF0ZSIpLAogICAgICAgIElubGluZUtleWJvYXJkQnV0dG9uKCJCZcSfZW5pbGVyaSBLYWxkxLFyIiwgY2FsbGJhY2tfZGF0YT0idW5saWtlIiksCiAgICAgICAgSW5saW5lS2V5Ym9hcmRCdXR0b24oIlRha2lwbGVyaSBLYWxkxLFyIiwgY2FsbGJhY2tfZGF0YT0idW5mb2xsb3ciKSwKICAgICAgICBJbmxpbmVLZXlib2FyZEJ1dHRvbigiRmF2b3JpIFZpZGVvbGFyxLEgS2FsZMSxciIsIGNhbGxiYWNrX2RhdGE9InVuY29sbGVjdCIpLAogICAgICAgIElubGluZUtleWJvYXJkQnV0dG9uKCJTZXNzaW9uIMOHZWsiLCB1cmw9Imh0dHBzOi8vdnQudGlrdG9rLmNvbS9aU2tVYUZYUWYvIiksCiAgICAgICAgSW5saW5lS2V5Ym9hcmRCdXR0b24oIlByb2dyYW1jxLEiLCB1cmw9ZiJodHRwczovL3QubWUve0RFVkVMT1BFUl9VU0VSTkFNRVsxOl19IikKICAgICkKICAgIHJldHVybiBtYXJrdXAKCkBib3QubWVzc2FnZV9oYW5kbGVyKGNvbW1hbmRzPVsnc3RhcnQnXSkKZGVmIHN0YXJ0KG1lc3NhZ2UpOgogICAgYm90LnNlbmRfbWVzc2FnZSgKICAgICAgICBtZXNzYWdlLmNoYXQuaWQsCiAgICAgICAgIi0gVGlrVG9rIEhpem1ldGxlciBCb3R1bmEgSG/Fn2dlbGRpbml6XG5Mw7x0ZmVuIGJpciBoaXptZXQgc2XDp2luOiIsCiAgICAgICAgcmVwbHlfbWFya3VwPW1haW5fbWVudSgpCiAgICApCgpAYm90LmNhbGxiYWNrX3F1ZXJ5X2hhbmRsZXIoZnVuYz1sYW1iZGEgY2FsbDogVHJ1ZSkKZGVmIGNhbGxiYWNrX3F1ZXJ5KGNhbGwpOgogICAgdXNlcl9pZCA9IGNhbGwuZnJvbV91c2VyLmlkCiAgICBjaGF0X2lkID0gY2FsbC5tZXNzYWdlLmNoYXQuaWQKCiAgICBpZiBjYWxsLmRhdGEgPT0gIm1ha2VfcHJpdmF0ZSI6CiAgICAgICAgYm90LmFuc3dlcl9jYWxsYmFja19xdWVyeShjYWxsLmlkKQogICAgICAgIHVzZXJfYWN0aW9uc1t1c2VyX2lkXSA9ICJtYWtlX3ByaXZhdGUiCiAgICAgICAgYm90LnNlbmRfbWVzc2FnZShjaGF0X2lkLCAiVmlkZW9sYXLEsW7EsXrEsSBnaXpsZW1layBpw6dpbiBoZXNhYsSxbsSxesSxbiBzZXNzaW9uaWQgYmlsZ2lzaW5pIGfDtm5kZXJpbi4iKQogICAgCiAgICBlbGlmIGNhbGwuZGF0YSA9PSAidW5saWtlIjoKICAgICAgICBib3QuYW5zd2VyX2NhbGxiYWNrX3F1ZXJ5KGNhbGwuaWQpCiAgICAgICAgdXNlcl9hY3Rpb25zW3VzZXJfaWRdID0gInVubGlrZSIKICAgICAgICBib3Quc2VuZF9tZXNzYWdlKGNoYXRfaWQsICJCZcSfZW5pbGVyaSBrYWxkxLFybWFrIGnDp2luIGhlc2FixLFuxLF6xLFuIHNlc3Npb25pZCBiaWxnaXNpbmkgZ8O2bmRlcmluLiIpCiAgICAKICAgIGVsaWYgY2FsbC5kYXRhID09ICJ1bmZvbGxvdyI6CiAgICAgICAgYm90LmFuc3dlcl9jYWxsYmFja19xdWVyeShjYWxsLmlkKQogICAgICAgIHVzZXJfYWN0aW9uc1t1c2VyX2lkXSA9ICJ1bmZvbGxvdyIKICAgICAgICBib3Quc2VuZF9tZXNzYWdlKGNoYXRfaWQsICJUYWtpcGxlcmkga2FsZMSxcm1hayBpw6dpbiBoZXNhYsSxbsSxesSxbiBzZXNzaW9uaWQgYmlsZ2lzaW5pIGfDtm5kZXJpbi4iKQogICAgCiAgICBlbGlmIGNhbGwuZGF0YSA9PSAidW5jb2xsZWN0IjoKICAgICAgICBib3QuYW5zd2VyX2NhbGxiYWNrX3F1ZXJ5KGNhbGwuaWQpCiAgICAgICAgdXNlcl9hY3Rpb25zW3VzZXJfaWRdID0gInVuY29sbGVjdCIKICAgICAgICBib3Quc2VuZF9tZXNzYWdlKGNoYXRfaWQsICJGYXZvcmkgdmlkZW9sYXLEsSBrYWxkxLFybWFrIGnDp2luIGhlc2FixLFuxLF6xLFuIHNlc3Npb25pZCBiaWxnaXNpbmkgZ8O2bmRlcmluLiIpCgoKQGJvdC5tZXNzYWdlX2hhbmRsZXIoZnVuYz1sYW1iZGEgbWVzc2FnZTogVHJ1ZSkKZGVmIGhhbmRsZV9tZXNzYWdlKG1lc3NhZ2UpOgogICAgdXNlcl9pZCA9IG1lc3NhZ2UuZnJvbV91c2VyLmlkCiAgICBjaGF0X2lkID0gbWVzc2FnZS5jaGF0LmlkCiAgICBzZXNzaW9uX2lkID0gbWVzc2FnZS50ZXh0LnN0cmlwKCkKICAgIAogICAgaWYgbm90IHNlc3Npb25faWQ6CiAgICAgICAgYm90LnNlbmRfbWVzc2FnZShjaGF0X2lkLCAiU2Vzc2lvbiBJRCBib8WfIG9sYW1hei4iKQogICAgICAgIHJldHVybgogICAgCiAgICBhY3Rpb24gPSB1c2VyX2FjdGlvbnMuZ2V0KHVzZXJfaWQpCiAgICAKICAgIGlmIGFjdGlvbiA9PSAibWFrZV9wcml2YXRlIjoKICAgICAgICBib3Quc2VuZF9tZXNzYWdlKGNoYXRfaWQsICJIZXNhcCB2ZXJpbGVyaSBhbMSxbsSxeW9yIHZlIHZpZGVvbGFyIGdpemxlbml5b3IuLi4iKQogICAgICAgIHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PXJ1bl9wcml2YXRlciwgYXJncz0oc2Vzc2lvbl9pZCwgY2hhdF9pZCkpLnN0YXJ0KCkKICAgIAogICAgZWxpZiBhY3Rpb24gPT0gInVubGlrZSI6CiAgICAgICAgdXNlcl9zdGF0ZXNbY2hhdF9pZF0gPSB7CiAgICAgICAgICAgICdzdGF0ZSc6ICdydW5uaW5nJywKICAgICAgICAgICAgJ2Nvb2tpZXMnOiB7CiAgICAgICAgICAgICAgICAnc2lkX3R0Jzogc2Vzc2lvbl9pZCwKICAgICAgICAgICAgICAgICdzZXNzaW9uaWQnOiBzZXNzaW9uX2lkLAogICAgICAgICAgICAgICAgJ3Nlc3Npb25pZF9zcyc6IHNlc3Npb25faWQsCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgbXNnID0gYm90LnNlbmRfbWVzc2FnZShjaGF0X2lkLCAiU2Vzc2lvbiBhbMSxbmTEsSwgacWfbGVtIGJhxZ9sYXTEsWzEsXlvci4uLiIpCiAgICAgICAgdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9cnVuX3VubGlrZV9wcm9jZXNzLCBhcmdzPShjaGF0X2lkLCBtc2cpKS5zdGFydCgpCiAgICAKICAgIGVsaWYgYWN0aW9uID09ICJ1bmZvbGxvdyI6CiAgICAgICAgc2VudCA9IGJvdC5zZW5kX21lc3NhZ2UoY2hhdF9pZCwgIlRha2lwbGVyIGthbGTEsXLEsWzEsXlvciwgbMO8dGZlbiBiZWtsZXlpbi4uLiIpCiAgICAgICAgdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9c3RhcnRfdW5mb2xsb3dfcHJvY2VzcywgYXJncz0oc2Vzc2lvbl9pZCwgc2VudCkpLnN0YXJ0KCkKICAgIAogICAgZWxpZiBhY3Rpb24gPT0gInVuY29sbGVjdCI6CiAgICAgICAgaWYgY2hhdF9pZCBpbiB1c2VyX3Nlc3Npb25zOgogICAgICAgICAgICBib3Quc2VuZF9tZXNzYWdlKGNoYXRfaWQsICLEsMWfbGVtIHphdGVuIMOnYWzEscWfxLF5b3IsIGzDvHRmZW4gYml0bWVzaW5pIGJla2xleWluIHZleWEgYm90dSB5ZW5pZGVuIGJhxZ9sYXTEsW4uIikKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgCiAgICAgICAgdXNlcl9zZXNzaW9uc1tjaGF0X2lkXSA9IHsKICAgICAgICAgICAgInNlc3Npb25pZCI6IHNlc3Npb25faWQsCiAgICAgICAgICAgICJjb3VudGVyIjogWzBdLAogICAgICAgICAgICAibG9jayI6IHRocmVhZGluZy5Mb2NrKCksCiAgICAgICAgICAgICJ1c2VkX2F3ZW1lX2lkcyI6IHNldCgpCiAgICAgICAgfQogICAgICAgIAogICAgICAgIHNlbnRfbXNnID0gYm90LnNlbmRfbWVzc2FnZShjaGF0X2lkLCAixLDFn2xlbWxlciB5w7xyw7x0w7xsw7x5b3IuLi4iKQogICAgICAgIHVzZXJfc2Vzc2lvbnNbY2hhdF9pZF1bIm1zZ19pZCJdID0gc2VudF9tc2cubWVzc2FnZV9pZAogICAgICAgIAogICAgICAgIHRocmVhZHMgPSBbXQogICAgICAgIGZvciBfIGluIHJhbmdlKDEwKToKICAgICAgICAgICAgdCA9IHRocmVhZGluZy5UaHJlYWQoCiAgICAgICAgICAgICAgICB0YXJnZXQ9d29ya2VyX3RocmVhZCwKICAgICAgICAgICAgICAgIGFyZ3M9KAogICAgICAgICAgICAgICAgICAgIGNoYXRfaWQsCiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbl9pZCwKICAgICAgICAgICAgICAgICAgICB1c2VyX3Nlc3Npb25zW2NoYXRfaWRdWyJjb3VudGVyIl0sCiAgICAgICAgICAgICAgICAgICAgdXNlcl9zZXNzaW9uc1tjaGF0X2lkXVsidXNlZF9hd2VtZV9pZHMiXSwKICAgICAgICAgICAgICAgICAgICB1c2VyX3Nlc3Npb25zW2NoYXRfaWRdWyJsb2NrIl0KICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBkYWVtb249VHJ1ZQogICAgICAgICAgICApCiAgICAgICAgICAgIHQuc3RhcnQoKQogICAgICAgICAgICB0aHJlYWRzLmFwcGVuZCh0KQogICAgICAgIAogICAgICAgIHVzZXJfdGhyZWFkc1tjaGF0X2lkXSA9IHRocmVhZHMKICAgIAogICAgZWxzZToKICAgICAgICBib3Quc2VuZF9tZXNzYWdlKGNoYXRfaWQsICJoacOnYmlyIGnFn2xlbSBzZcOnaWxtZWRpLGzDvHRmZW4gYmlyIGnFn2xlbSBzZcOnaW4iKQoKCmRlZiBnZXRfaW5mb191cmwoY29va2llc19jb21tb24pOgogICAgaGVhZGVycyA9IHsKICAgICAgICAndXNlci1hZ2VudCc6ICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgNi4wOyBOZXh1cyA1IEJ1aWxkL01SQTU4TikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEzOC4wLjAuMCBNb2JpbGUgU2FmYXJpLzUzNy4zNicsCiAgICB9CgogICAgY29va2llczIgPSBjb29raWVzX2NvbW1vbi5jb3B5KCkKICAgIGNvb2tpZXMyWydfdHRwJ10gPSAnMnZnaXJqT251U3JTT25wcmJLVDRmNkgwaDRVJwogICAgY29va2llczJbJ3R0X2NoYWluX3Rva2VuJ10gPSAnYUkrdHlXUkJIL2h4RHdLMmpRcVZGZz09JwoKICAgIHVybCA9ICJodHRwczovL3d3dy50aWt0b2suY29tL3Bhc3Nwb3J0L3dlYi9hY2NvdW50L2luZm8vP1dlYklkTGFzdFRpbWU9MTc0NTk0ODQxOCZhaWQ9MTQ1OSZhcHBfbGFuZ3VhZ2U9YXImYXBwX25hbWU9dGlrdG9rX3dlYiZkZXZpY2VfcGxhdGZvcm09d2ViX21vYmlsZSZyZWZlcmVyPWh0dHBzJTNBJTJGJTJGd3d3LnRpa3Rvay5jb20lMkYmcmVnaW9uPUlRIgogICAgCiAgICByZXNwb25zZSA9IHJlcXVlc3RzLmdldCh1cmwsIGhlYWRlcnM9aGVhZGVycywgY29va2llcz1jb29raWVzMikKICAgIHRyeToKICAgICAgICBkYXRhID0gcmVzcG9uc2UuanNvbigpCiAgICAgICAgdXNlcl9pZCA9IGRhdGFbImRhdGEiXVsidXNlcl9pZCJdCiAgICAgICAgc2VjX3VzZXJfaWQgPSBkYXRhWyJkYXRhIl1bInNlY191c2VyX2lkIl0KICAgICAgICByZXR1cm4gc2VjX3VzZXJfaWQKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludCgiVmVyaSDDp2VrbWUgc8SxcmFzxLFuZGEgaGF0YSBvbHXFn3R1OiIsIGUpCiAgICAgICAgcmV0dXJuIE5vbmUKCmRlZiBnZXRfZmF2b3JpdGVzX3JlcyhzZWNfdXNlcl9pZCwgY29va2llc19jb21tb24pOgogICAgaWYgbm90IHNlY191c2VyX2lkOgogICAgICAgIHByaW50KCLEsMWfbGVtIHNlY191c2VyX2lkIG9sbWFkYW4gdGFtYW1sYW5hbWF6IikKICAgICAgICByZXR1cm4gTm9uZQoKICAgIHVybCA9IGYiaHR0cHM6Ly9hcGkyMi1ub3JtYWwtYy1hbGlzZy50aWt0b2t2LmNvbS9hd2VtZS92MS9hd2VtZS9mYXZvcml0ZS8/aW52YWxpZF9pdGVtX2NvdW50PTAmaXNfaGlkaW5nX2ludmFsaWRfaXRlbT0wJm1heF9jdXJzb3I9MCZzZWNfdXNlcl9pZD17c2VjX3VzZXJfaWR9JmNvdW50PTIwJmRldmljZV9wbGF0Zm9ybT1hbmRyb2lkJm9zPWFuZHJvaWQmc3NtaXg9YSZfcnRpY2tldD0xNzUzMTA5MTIxOTU3JmNkaWQ9OTVhNjMwZGEtNjI5YS00NTRmLTg2NjktM2RlOTNmNzY4NGRmJmNoYW5uZWw9Z29vZ2xlcGxheSZhaWQ9MTIzMyZhcHBfbmFtZT1tdXNpY2FsX2x5JnZlcnNpb25fY29kZT0zNzAxMDQmdmVyc2lvbl9uYW1lPTM3LjEuNCZtYW5pZmVzdF92ZXJzaW9uX2NvZGU9MjAyMzcwMTA0MCZ1cGRhdGVfdmVyc2lvbl9jb2RlPTIwMjM3MDEwNDAmYWJfdmVyc2lvbj0zNy4xLjQmcmVzb2x1dGlvbj05MDAqMTYwMCZkcGk9MzAwJmRldmljZV90eXBlPUFTVVNfSTAwM0REJmRldmljZV9icmFuZD1Bc3VzJmxhbmd1YWdlPWFyJm9zX2FwaT0yOCZvc192ZXJzaW9uPTkmYWM9d2lmaSZpc19wYWQ9MCZjdXJyZW50X3JlZ2lvbj1JUSZhcHBfdHlwZT1ub3JtYWwmc3lzX3JlZ2lvbj1JUSZsYXN0X2luc3RhbGxfdGltZT0xNzUyOTc0NTg1Jm1jY19tbmM9NDE4NDAmdGltZXpvbmVfbmFtZT1Bc2lhJTJGU2hhbmdoYWkmcmVzaWRlbmNlPUlRJmFwcF9sYW5ndWFnZT1hciZjYXJyaWVyX3JlZ2lvbj1JUSZ0aW1lem9uZV9vZmZzZXQ9Mjg4MDAmaG9zdF9hYmk9YXJtNjQtdjhhJmxvY2FsZT1hciZhYzI9d2lmaSZ1b289MCZvcF9yZWdpb249SVEmYnVpbGRfbnVtYmVyPTM3LjEuNCZyZWdpb249SVEmdHM9MTc1MzA5ODMyMSZpaWQ9NzUyODg3NTE0OTQ1OTczNjMyNyZkZXZpY2VfaWQ9NzUyODg3NDgzNzc2MDA2NzA5MCZvcGVudWRpZD01MmVjYTMyOTc5ZTkyNjMzIgogICAgCiAgICBzYXlpZC5jb29raWVzLnVwZGF0ZShjb29raWVzX2NvbW1vbikKICAgIHBhcmFtcyA9IHsiZGV2aWNlX2lkIjogZGV2aWNlX2lkLCAib3NfdmVyc2lvbiI6ICI5IiwgInZlcnNpb25fbmFtZSI6ICIzNy44LjUifQogICAgSCA9IFNpZ25lclB5LnNpZ24ocGFyYW1zPXBhcmFtcywgY29va2llPWNvb2tpZXNfY29tbW9uKQoKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ1VzZXItQWdlbnQnOiAiY29tLnpoaWxpYW9hcHAubXVzaWNhbGx5LzIwMjM3MDEwNDAgKExpbnV4OyBVOyBBbmRyb2lkIDk7IGFyOyBBU1VTX0kwMDNERDsgQnVpbGQvUEk7dHQtb2svMy4xMi4xMy40LXRpa3RvaykiLAogICAgICAgICd4LXNzLXJlcS10aWNrZXQnOiBIWyd4LXNzLXJlcS10aWNrZXQnXSwKICAgICAgICAneC1sYWRvbic6IEhbJ3gtbGFkb24nXSwKICAgICAgICAneC1raHJvbm9zJzogSFsneC1raHJvbm9zJ10sCiAgICAgICAgJ3gtYXJndXMnOiBIWyd4LWFyZ3VzJ10sCiAgICAgICAgJ3gtZ29yZ29uJzogSFsneC1nb3Jnb24nXSwKICAgIH0KCiAgICB0cnk6CiAgICAgICAgcmVzID0gc2F5aWQuZ2V0KHVybCwgaGVhZGVycz1oZWFkZXJzLCBjb29raWVzPWNvb2tpZXNfY29tbW9uKSAgCiAgICAgICAgZGF0YSA9IHJlcy5qc29uKCkKICAgICAgICBhd2VtZV9pZHMgPSBbYXdlbWVbJ2F3ZW1lX2lkJ10gZm9yIGF3ZW1lIGluIGRhdGEuZ2V0KCdhd2VtZV9saXN0JywgW10pXQogICAgICAgIHVuaXF1ZV9pZHMgPSBsaXN0KHNldChhd2VtZV9pZHMpKQogICAgICAgIHJldHVybiB1bmlxdWVfaWRzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJGYXZvcmlsZXIgYWzEsW7EsXJrZW4gaGF0YSBvbHXFn3R1OiB7ZX0iKQogICAgICAgIHJldHVybiBOb25lCgpkZWYgZGlnZ19hd2VtZV9yZXMxKGF3ZW1lLCBjb29raWVzX2NvbW1vbik6CiAgICBpZiBub3QgYXdlbWU6CiAgICAgICAgcmV0dXJuIEZhbHNlLCAiQXdlbWUgSUQgYnVsdW5hbWFkxLEuIgogICAgICAgIAogICAgdXJsMSA9IGYiaHR0cHM6Ly9hcGkyMi1ub3JtYWwtYy1hbGlzZy50aWt0b2t2LmNvbS9hd2VtZS92MS9jb21taXQvaXRlbS9kaWdnLz9hd2VtZV9pZD17YXdlbWV9JmVudGVyX2Zyb209cGVyc29uYWxfaG9tZXBhZ2UmZnJpZW5kc191cHZvdGU9ZmFsc2UmdHlwZT0wJmNoYW5uZWxfaWQ9MyZpaWQ9NzUyODg3NTE0OTQ1OTczNjMyNyZkZXZpY2VfaWQ9NzUyODg3NDgzNzc2MDA2NzA5MCZhYz1XSUZJJmNoYW5uZWw9Z29vZ2xlcGxheSZhaWQ9MTIzMyZhcHBfbmFtZT1tdXNpY2FsX2x5JnZlcnNpb25fY29kZT0zNzAxMDQmdmVyc2lvbl9uYW1lPTM3LjEuNCZkZXZpY2VfcGxhdGZvcm09YW5kcm9pZCZvcz1hbmRyb2lkJmFiX3ZlcnNpb249MzcuMS40JnNzbWl4PWEmZGV2aWNlX3R5cGU9QVNVU19JMDAzREQmZGV2aWNlX2JyYW5kPUFzdXMmbGFuZ3VhZ2U9YXImb3NfYXBpPTI4Jm9zX3ZlcnNpb249OSZvcGVudWRpZD01MmVjYTMyOTc5ZTkyNjMzJm1hbmlmZXN0X3ZlcnNpb25fY29kZT0yMDIzNzAxMDQwJnJlc29sdXRpb249MTYwMCo5MDAmZHBpPTMwMCZ1cGRhdGVfdmVyc2lvbl9jb2RlPTIwMjM3MDEwNDAmX3J0aWNrZXQ9MTc1MzExMzU2MDU0OSZpc19wYWQ9MCZhcHBfdHlwZT1ub3JtYWwmc3lzX3JlZ2lvbj1JUSZsYXN0X2luc3RhbGxfdGltZT0xNzUzMTEzMjczJm1jY19tbmM9NDE4NDAmdGltZXpvbmVfbmFtZT1Bc2lhJTJGU2hhbmdoYWkmYXBwX2xhbmd1YWdlPWFyJmNhcnJpZXJfcmVnaW9uPUlRJmFjMj13aWZpJnVvbz0wJm9wX3JlZ2lvbj1JUSZ0aW1lem9uZV9vZmZzZXQ9Mjg4MDAmYnVpbGRfbnVtYmVyPTM3LjEuNCZob3N0X2FiaT1hcm02NC12OGEmbG9jYWxlPWFyJnJlZ2lvbj1JUSZ0cz0xNzUzMTAyNzYwJmNkaWQ9MWU1YzFhZTktNWNmOC00ODc5LTk1ZjAtNWVkZGUyMzUyYjU3IgoKICAgIHNheWlkLmNvb2tpZXMudXBkYXRlKGNvb2tpZXNfY29tbW9uKQogICAgcGFyYW1zMiA9IHsiZGV2aWNlX2lkIjogZGV2aWNlX2lkLCAib3NfdmVyc2lvbiI6ICI5IiwgInZlcnNpb25fbmFtZSI6ICIzNy44LjUifQogICAgSDEgPSBTaWduZXJQeS5zaWduKHBhcmFtcz1wYXJhbXMyLCBjb29raWU9Y29va2llc19jb21tb24pCgogICAgaGVhZGVyczIgPSB7CiAgICAgICAgJ1VzZXItQWdlbnQnOiAiY29tLnpoaWxpYW9hcHAubXVzaWNhbGx5LzIwMjM3MDEwNDAuLi4iLAogICAgICAgICd4LXNzLXJlcS10aWNrZXQnOiBIMVsneC1zcy1yZXEtdGlja2V0J10sCiAgICAgICAgJ3gtbGFkb24nOiBIMVsneC1sYWRvbiddLAogICAgICAgICd4LWtocm9ub3MnOiBIMVsneC1raHJvbm9zJ10sCiAgICAgICAgJ3gtYXJndXMnOiBIMVsneC1hcmd1cyddLAogICAgICAgICd4LWdvcmdvbic6IEgxWyd4LWdvcmdvbiddLAogICAgfQoKICAgIHRyeToKICAgICAgICByZXMxID0gc2F5aWQuZ2V0KHVybDEsIGhlYWRlcnM9aGVhZGVyczIsIGNvb2tpZXM9Y29va2llc19jb21tb24pCiAgICAgICAgcmVzX2pzb24gPSByZXMxLmpzb24oKQogICAgICAgIHN1Y2Nlc3MgPSByZXNfanNvbi5nZXQoInN0YXR1c19jb2RlIikgPT0gMCBhbmQgcmVzX2pzb24uZ2V0KCJpc19kaWdnIikgPT0gMQogICAgICAgIHJldHVybiBzdWNjZXNzLCBqc29uLmR1bXBzKHJlc19qc29uLCBpbmRlbnQ9MiwgZW5zdXJlX2FzY2lpPUZhbHNlKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHJldHVybiBGYWxzZSwgZiLEsMWfbGVtIHPEsXJhc8SxbmRhIGhhdGEgb2x1xZ90dToge2V9IgoKZGVmIHJ1bl91bmxpa2VfcHJvY2VzcyhjaGF0X2lkLCBtc2cpOgogICAgdXNlcl9kYXRhID0gdXNlcl9zdGF0ZXMuZ2V0KGNoYXRfaWQpCiAgICBpZiBub3QgdXNlcl9kYXRhIG9yICdjb29raWVzJyBub3QgaW4gdXNlcl9kYXRhOgogICAgICAgIGJvdC5lZGl0X21lc3NhZ2VfdGV4dCgiU2Vzc2lvbiBidWx1bmFtYWTEsS4iLCBjaGF0X2lkLCBtc2cubWVzc2FnZV9pZCkKICAgICAgICByZXR1cm4KCiAgICBjb29raWVzX2NvbW1vbiA9IHVzZXJfZGF0YVsnY29va2llcyddCiAgICBzZWNfdXNlcl9pZCA9IGdldF9pbmZvX3VybChjb29raWVzX2NvbW1vbikKICAgIGlmIG5vdCBzZWNfdXNlcl9pZDoKICAgICAgICBib3QuZWRpdF9tZXNzYWdlX3RleHQoIlNlY191c2VyX2lkIGFsxLFuYW1hZMSxLiIsIGNoYXRfaWQsIG1zZy5tZXNzYWdlX2lkKQogICAgICAgIHJldHVybgoKICAgIGxpa2VfY291bnQgPSBbMF0gCiAgICBsaWtlX2NvdW50X2xvY2sgPSB0aHJlYWRpbmcuTG9jaygpCgogICAgYm90LmVkaXRfbWVzc2FnZV90ZXh0KGYiQmXEn2VuaWxlcmkga2FsZMSxcm1hIGnFn2xlbWkgYmHFn2xhdMSxbGTEsVxuS2FsZMSxcsSxbGFuIGJlxJ9lbmkgc2F5xLFzxLE6IHtsaWtlX2NvdW50WzBdfSIsIGNoYXRfaWQsIG1zZy5tZXNzYWdlX2lkKQoKICAgIHdoaWxlIFRydWU6CiAgICAgICAgYXdlbWVfaWRzID0gZ2V0X2Zhdm9yaXRlc19yZXMoc2VjX3VzZXJfaWQsIGNvb2tpZXNfY29tbW9uKQogICAgICAgIGlmIG5vdCBhd2VtZV9pZHM6CiAgICAgICAgICAgIGJyZWFrCgogICAgICAgIGF3ZW1lX3F1ZXVlID0gcXVldWUuUXVldWUoKQogICAgICAgIGZvciBhd2VtZSBpbiBhd2VtZV9pZHM6CiAgICAgICAgICAgIGF3ZW1lX3F1ZXVlLnB1dChhd2VtZSkKCiAgICAgICAgdGhyZWFkcyA9IFtdCiAgICAgICAgZm9yIF8gaW4gcmFuZ2UoMjApOiAgCiAgICAgICAgICAgIHQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD13b3JrZXIsIGFyZ3M9KGF3ZW1lX3F1ZXVlLCBjb29raWVzX2NvbW1vbiwgY2hhdF9pZCwgbXNnLCBsaWtlX2NvdW50X2xvY2ssIGxpa2VfY291bnQpKQogICAgICAgICAgICB0LnN0YXJ0KCkKICAgICAgICAgICAgdGhyZWFkcy5hcHBlbmQodCkKCiAgICAgICAgZm9yIHQgaW4gdGhyZWFkczoKICAgICAgICAgICAgdC5qb2luKCkKCiAgICBib3QuZWRpdF9tZXNzYWdlX3RleHQoZiLEsMWfbGVtIGJhxZ9hcsSxeWxhIHRhbWFtbGFuZMSxLlxuS2FsZMSxcsSxbGFuIGJlxJ9lbmkgc2F5xLFzxLE6IHtsaWtlX2NvdW50WzBdfSIsIGNoYXRfaWQsIG1zZy5tZXNzYWdlX2lkKQoKZGVmIHdvcmtlcihhd2VtZV9xdWV1ZSwgY29va2llc19jb21tb24sIGNoYXRfaWQsIG1zZywgbGlrZV9jb3VudF9sb2NrLCBsaWtlX2NvdW50KToKICAgIHdoaWxlIFRydWU6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBhd2VtZSA9IGF3ZW1lX3F1ZXVlLmdldF9ub3dhaXQoKQogICAgICAgIGV4Y2VwdCBxdWV1ZS5FbXB0eToKICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgc3VjY2VzcywgXyA9IGRpZ2dfYXdlbWVfcmVzMShhd2VtZSwgY29va2llc19jb21tb24pCiAgICAgICAgaWYgc3VjY2VzczoKICAgICAgICAgICAgd2l0aCBsaWtlX2NvdW50X2xvY2s6CiAgICAgICAgICAgICAgICBsaWtlX2NvdW50WzBdICs9IDEKICAgIHRyeToKICAgIAlib3QuZWRpdF9tZXNzYWdlX3RleHQoZiJCZcSfZW5pbGVyaSBrYWxkxLFybWEgacWfbGVtaSBiYcWfbGF0xLFsZMSxXG5LYWxkxLFyxLFsYW4gYmXEn2VuaSBzYXnEsXPEsToge2xpa2VfY291bnRbMF19IiwgY2hhdF9pZCwgbXNnLm1lc3NhZ2VfaWQpCiAgICBleGNlcHQ6CiAgICAJcGFzcwogICAgZmluYWxseToKICAgIAlhd2VtZV9xdWV1ZS50YXNrX2RvbmUoKQoKCmRlZiBnZW5lcmF0ZV9zaWduZWRfaGVhZGVycyhkZXZpY2VfaWQsIGNvb2tpZXMpOgogICAgcGFyYW1zID0gewogICAgICAgICJkZXZpY2VfaWQiOiBkZXZpY2VfaWQsCiAgICAgICAgIm9zX3ZlcnNpb24iOiAiOSIsCiAgICAgICAgInZlcnNpb25fbmFtZSI6ICIzNy44LjUiCiAgICB9CiAgICBzaWduZWQgPSBTaWduZXJQeS5zaWduKHBhcmFtcz1wYXJhbXMsIGNvb2tpZT1jb29raWVzKQogICAgcmV0dXJuIHsKICAgICAgICAnVXNlci1BZ2VudCc6ICdjb20uemhpbGlhb2FwcC5tdXNpY2FsbHkvMjAyMzcwMTA0MCAoTGludXg7IFU7IEFuZHJvaWQgOTsgYXI7IEFTVVNfSTAwM0REOyBCdWlsZC9QSTt0dC1vay8zLjEyLjEzLjQtdGlrdG9rKScsCiAgICAgICAgJ3gtc3MtcmVxLXRpY2tldCc6IHNpZ25lZFsneC1zcy1yZXEtdGlja2V0J10sCiAgICAgICAgJ3gtbGFkb24nOiBzaWduZWRbJ3gtbGFkb24nXSwKICAgICAgICAneC1raHJvbm9zJzogc2lnbmVkWyd4LWtocm9ub3MnXSwKICAgICAgICAneC1hcmd1cyc6IHNpZ25lZFsneC1hcmd1cyddLAogICAgICAgICd4LWdvcmdvbic6IHNpZ25lZFsneC1nb3Jnb24nXSwKICAgIH0KCmRlZiBnZXRfYWNjb3VudF9pbmZvKGNvb2tpZXMpOgogICAgdXJsID0gImh0dHBzOi8vd3d3LnRpa3Rvay5jb20vcGFzc3BvcnQvd2ViL2FjY291bnQvaW5mby8/V2ViSWRMYXN0VGltZT0xNzQ1OTQ4NDE4JmFpZD0xNDU5JmFwcF9sYW5ndWFnZT1hciZhcHBfbmFtZT10aWt0b2tfd2ViJmRldmljZV9wbGF0Zm9ybT13ZWJfbW9iaWxlJnJlZmVyZXI9aHR0cHMlM0ElMkYlMkZ3d3cudGlrdG9rLmNvbSUyRiZyZWdpb249SVEiCiAgICBoZWFkZXJzID0geyd1c2VyLWFnZW50JzogJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA2LjA7IE5leHVzIDUgQnVpbGQvTVJBNThOKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTM4LjAuMC4wIE1vYmlsZSBTYWZhcmkvNTM3LjM2J30KICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmwsIGhlYWRlcnM9aGVhZGVycywgY29va2llcz1jb29raWVzLCB0aW1lb3V0PTEwKQogICAgZGF0YSA9IHJlcy5qc29uKClbImRhdGEiXQogICAgcmV0dXJuIGRhdGFbInVzZXJfaWQiXSwgZGF0YVsic2VjX3VzZXJfaWQiXQoKZGVmIGdldF9mb2xsb3dpbmcodXNlcl9pZCwgc2VjX3VzZXJfaWQsIGhlYWRlcnMsIHNlc3Npb24pOgogICAgdXJsID0gZiJodHRwczovL2FwaTIyLW5vcm1hbC1jLWFsaXNnLnRpa3Rva3YuY29tL2F3ZW1lL3YxL3VzZXIvZm9sbG93aW5nL2xpc3QvP3VzZXJfaWQ9e3VzZXJfaWR9JnNlY191c2VyX2lkPXtzZWNfdXNlcl9pZH0mbWF4X3RpbWU9MCZjb3VudD00MCZvZmZzZXQ9MCZzb3VyY2VfdHlwZT0xJmFkZHJlc3NfYm9va19hY2Nlc3M9MSZwYWdlX3Rva2VuJmxpdmVfc29ydF9ieT0xJmRldmljZV9wbGF0Zm9ybT1hbmRyb2lkJm9zPWFuZHJvaWQmc3NtaXg9YSZfcnRpY2tldD0xNzUzMTg0ODcwMDQxJmNkaWQ9MWU1YzFhZTktNWNmOC00ODc5LTk1ZjAtNWVkZGUyMzUyYjU3JmNoYW5uZWw9Z29vZ2xlcGxheSZhaWQ9MTIzMyZhcHBfbmFtZT1tdXNpY2FsX2x5JnZlcnNpb25fY29kZT0zNzAxMDQmdmVyc2lvbl9uYW1lPTM3LjEuNCZtYW5pZmVzdF92ZXJzaW9uX2NvZGU9MjAyMzcwMTA0MCZ1cGRhdGVfdmVyc2lvbl9jb2RlPTIwMjM3MDEwNDAmYWJfdmVyc2lvbj0zNy4xLjQmcmVzb2x1dGlvbj05MDAqMTYwMCZkcGk9MzAwJmRldmljZV90eXBlPUFTVVNfSTAwM0REJmRldmljZV9icmFuZD1Bc3VzJmxhbmd1YWdlPWFyJm9zX2FwaT0yOCZvc192ZXJzaW9uPTkmYWM9d2lmaSZpc19wYWQ9MCZjdXJyZW50X3JlZ2lvbj1JUSZhcHBfdHlwZT1ub3JtYWwmc3lzX3JlZ2lvbj1JUSZsYXN0X2luc3RhbGxfdGltZT0xNzUzMTEzMjczJm1jY19tbmM9NDE4NDAmdGltZXpvbmVfbmFtZT1Bc2lhJTJGU2hhbmdoYWkmcmVzaWRlbmNlPUlRJmFwcF9sYW5ndWFnZT1hciZjYXJyaWVyX3JlZ2lvbj1JUSZ0aW1lem9uZV9vZmZzZXQ9Mjg4MDAmaG9zdF9hYmk9YXJtNjQtdjhhJmxvY2FsZT1hciZhYzI9d2lmaSZ1b289MCZvcF9yZWdpb249SVEmYnVpbGRfbnVtYmVyPTM3LjEuNCZyZWdpb249SVEmdHM9MTc1MzE3NDA2OSZpaWQ9NzUyODg3NTE0OTQ1OTczNjMyNyZkZXZpY2VfaWQ9NzUyODg3NDgzNzc2MDA2NzA5MCZvcGVudWRpZD01MmVjYTMyOTc5ZTkyNjMzIgogICAgcmVzcG9uc2UgPSBzZXNzaW9uLmdldCh1cmwsIGhlYWRlcnM9aGVhZGVycykKICAgIHJldHVybiByZS5maW5kYWxsKHInInNlY191aWQiOiIoLio/KSIuKj8idWlkIjoiKC4qPykiJywgcmVzcG9uc2UudGV4dCkKCmRlZiB1bmZvbGxvd191c2VyKHVpZCwgc2VjX3VpZCwgaGVhZGVycywgY29va2llcyk6CiAgICB1cmwgPSBmImh0dHBzOi8vYXBpMjItbm9ybWFsLWMtYWxpc2cudGlrdG9rdi5jb20vYXdlbWUvdjEvY29tbWl0L2ZvbGxvdy91c2VyLz91c2VyX2lkPXt1aWR9JnNlY191c2VyX2lkPXtzZWNfdWlkfSZ0eXBlPTAmY2hhbm5lbF9pZD0tMSZmcm9tPTAmZnJvbV9wcmU9MzEmYWN0aW9uX3RpbWU9MTc1MzE4NTUwNDUxMCZpc19uZXR3b3JrX2F2YWlsYWJsZT10cnVlJmRldmljZV9wbGF0Zm9ybT1hbmRyb2lkJm9zPWFuZHJvaWQmc3NtaXg9YSZfcnRpY2tldD0xNzUzMTg1NTA0NTE3JmNkaWQ9MWU1YzFhZTktNWNmOC00ODc5LTk1ZjAtNWVkZGUyMzUyYjU3JmNoYW5uZWw9Z29vZ2xlcGxheSZhaWQ9MTIzMyZhcHBfbmFtZT1tdXNpY2FsX2x5JnZlcnNpb25fY29kZT0zNzAxMDQmdmVyc2lvbl9uYW1lPTM3LjEuNCZtYW5pZmVzdF92ZXJzaW9uX2NvZGU9MjAyMzcwMTA0MCZ1cGRhdGVfdmVyc2lvbl9jb2RlPTIwMjM3MDEwNDAmYWJfdmVyc2lvbj0zNy4xLjQmcmVzb2x1dGlvbj05MDAqMTYwMCZkcGk9MzAwJmRldmljZV90eXBlPUFTVVNfSTAwM0REJmRldmljZV9icmFuZD1Bc3VzJmxhbmd1YWdlPWFyJm9zX2FwaT0yOCZvc192ZXJzaW9uPTkmYWM9d2lmaSZpc19wYWQ9MCZjdXJyZW50X3JlZ2lvbj1JUSZhcHBfdHlwZT1ub3JtYWwmc3lzX3JlZ2lvbj1JUSZsYXN0X2luc3RhbGxfdGltZT0xNzUzMTEzMjczJm1jY19tbmM9NDE4NDAmdGltZXpvbmVfbmFtZT1Bc2lhJTJGU2hhbmdoYWkmcmVzaWRlbmNlPUlRJmFwcF9sYW5ndWFnZT1hciZjYXJyaWVyX3JlZ2lvbj1JUSZ0aW1lem9uZV9vZmZzZXQ9Mjg4MDAmaG9zdF9hYmk9YXJtNjQtdjhhJmxvY2FsZT1hciZhYzI9d2lmaSZ1b289MCZvcF9yZWdpb249SVEmYnVpbGRfbnVtYmVyPTM3LjEuNCZyZWdpb249SVEmdHM9MTc1MzE3NDcwNCZpaWQ9NzUyODg3NTE0OTQ1OTczNjMyNyZkZXZpY2VfaWQ9NzUyODg3NDgzNzc2MDA2NzA5MCZvcGVudWRpZD01MmVjYTMyOTc5ZTkyNjMzIgogICAgdHJ5OgogICAgICAgIHJlcXVlc3RzLmdldCh1cmwsIGhlYWRlcnM9aGVhZGVycywgY29va2llcz1jb29raWVzLCB0aW1lb3V0PTEwKQogICAgICAgIHJldHVybiBUcnVlCiAgICBleGNlcHQ6CiAgICAgICAgcmV0dXJuIEZhbHNlCgpkZWYgc3RhcnRfdW5mb2xsb3dfcHJvY2VzcyhzZXNzaW9uX2lkLCBtZXNzYWdlKToKICAgIGRldmljZV9pZCA9IHN0cihyYW5kb20ucmFuZGludCgxMCoqMTgsIDEwKioxOSAtIDEpKQogICAgY29va2llcyA9IHsKICAgICAgICAnc2lkX3R0Jzogc2Vzc2lvbl9pZCwKICAgICAgICAnc2Vzc2lvbmlkJzogc2Vzc2lvbl9pZCwKICAgICAgICAnc2Vzc2lvbmlkX3NzJzogc2Vzc2lvbl9pZCwKICAgIH0KICAgIHNlc3Npb24gPSByZXF1ZXN0cy5TZXNzaW9uKCkKICAgIHNlc3Npb24uY29va2llcy51cGRhdGUoY29va2llcykKCiAgICB0cnk6CiAgICAgICAgdXNlcl9pZCwgc2VjX3VzZXJfaWQgPSBnZXRfYWNjb3VudF9pbmZvKGNvb2tpZXMpCiAgICBleGNlcHQ6CiAgICAgICAgYm90LmVkaXRfbWVzc2FnZV90ZXh0KCJIZXNhcCB2ZXJpbGVyaSBhbMSxbmFtYWTEsSwgbMO8dGZlbiBzZXNzaW9uaWQgYmlsZ2lzaW5pIGtvbnRyb2wgZWRpbiIsIG1lc3NhZ2UuY2hhdC5pZCwgbWVzc2FnZS5tZXNzYWdlX2lkKQogICAgICAgIHJldHVybgoKICAgIGhlYWRlcnMgPSBnZW5lcmF0ZV9zaWduZWRfaGVhZGVycyhkZXZpY2VfaWQsIGNvb2tpZXMpCiAgICBjb3VudCA9IDAKICAgIHdoaWxlIFRydWU6CiAgICAgICAgbWF0Y2hlcyA9IGdldF9mb2xsb3dpbmcodXNlcl9pZCwgc2VjX3VzZXJfaWQsIGhlYWRlcnMsIHNlc3Npb24pCiAgICAgICAgaWYgbm90IG1hdGNoZXM6CiAgICAgICAgICAgIGJvdC5lZGl0X21lc3NhZ2VfdGV4dChmIntjb3VudH0gaGVzYWLEsW4gdGFraWJpIGJhxZ9hcsSxeWxhIGthbGTEsXLEsWxkxLEiLCBtZXNzYWdlLmNoYXQuaWQsIG1lc3NhZ2UubWVzc2FnZV9pZCkKICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgd2l0aCBjb25jdXJyZW50LmZ1dHVyZXMuVGhyZWFkUG9vbEV4ZWN1dG9yKG1heF93b3JrZXJzPTM1KSBhcyBleGVjdXRvcjoKICAgICAgICAgICAgZnV0dXJlcyA9IFtdCiAgICAgICAgICAgIGZvciBzZWNfdWlkLCB1aWQgaW4gbWF0Y2hlczoKICAgICAgICAgICAgICAgIGZ1dHVyZXMuYXBwZW5kKGV4ZWN1dG9yLnN1Ym1pdCh1bmZvbGxvd191c2VyLCB1aWQsIHNlY191aWQsIGhlYWRlcnMsIGNvb2tpZXMpKQoKICAgICAgICAgICAgZm9yIGZ1dHVyZSBpbiBjb25jdXJyZW50LmZ1dHVyZXMuYXNfY29tcGxldGVkKGZ1dHVyZXMpOgogICAgICAgICAgICAgICAgaWYgZnV0dXJlLnJlc3VsdCgpOgogICAgICAgICAgICAgICAgICAgIGNvdW50ICs9IDEKICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIGJvdC5lZGl0X21lc3NhZ2VfdGV4dChmIntjb3VudH0gaGVzYWLEsW4gdGFraWJpIGthbGTEsXLEsWxkxLEiLCBtZXNzYWdlLmNoYXQuaWQsIG1lc3NhZ2UubWVzc2FnZV9pZCkKICAgICAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MKCgpkZWYgZ2V0X2F3ZW1lX2lkKHNlc3Npb24sIGNvb2tpZSk6CiAgICBkZXZpY2VfaWQgPSBzdHIocmFuZG9tLnJhbmRpbnQoMTAqKjE4LCAxMCoqMTkgLSAxKSkKICAgIHVybCA9ICJodHRwczovL2FwaTIyLW5vcm1hbC1jLWFsaXNnLnRpa3Rva3YuY29tL2F3ZW1lL3YxL2F3ZW1lL2xpc3Rjb2xsZWN0aW9uLz9zb3ZfY2xpZW50X2VuYWJsZT0xJmN1cnNvcj0wJmNvdW50PTIwJmRldmljZV9wbGF0Zm9ybT1hbmRyb2lkJm9zPWFuZHJvaWQmc3NtaXg9YSZfcnRpY2tldD0xNzUzMjI4MTUwOTEwJmNkaWQ9MWU1YzFhZTktNWNmOC00ODc5LTk1ZjAtNWVkZGUyMzUyYjU3JmNoYW5uZWw9Z29vZ2xlcGxheSZhaWQ9MTIzMyZhcHBfbmFtZT1tdXNpY2FsX2x5JnZlcnNpb25fY29kZT0zNzAxMDQmdmVyc2lvbl9uYW1lPTM3LjEuNCZtYW5pZmVzdF92ZXJzaW9uX2NvZGU9MjAyMzcwMTA0MCZ1cGRhdGVfdmVyc2lvbl9jb2RlPTIwMjM3MDEwNDAmYWJfdmVyc2lvbj0zNy4xLjQmcmVzb2x1dGlvbj0xNjAwKjkwMCZkcGk9MzAwJmRldmljZV90eXBlPUFTVVNfSTAwM0REJmRldmljZV9icmFuZD1Bc3VzJmxhbmd1YWdlPWFyJm9zX2FwaT0yOCZvc192ZXJzaW9uPTkmYWM9d2lmaSZpc19wYWQ9MCZjdXJyZW50X3JlZ2lvbj1JUSZhcHBfdHlwZT1ub3JtYWwmc3lzX3JlZ2lvbj1JUSZsYXN0X2luc3RhbGxfdGltZT0xNzUzMTEzMjczJm1jY19tbmM9NDE4NDAmdGltZXpvbmVfbmFtZT1Bc2lhJTJGU2hhbmdoYWkmcmVzaWRlbmNlPUlRJmFwcF9sYW5ndWFnZT1hciZjYXJyaWVyX3JlZ2lvbj1JUSZ0aW1lem9uZV9vZmZzZXQ9Mjg4MDAmaG9zdF9hYmk9YXJtNjQtdjhhJmxvY2FsZT1hciZhYzI9d2lmaSZ1b289MCZvcF9yZWdpb249SVEmYnVpbGRfbnVtYmVyPTM3LjEuNCZyZWdpb249SVEmdHM9MTc1MzIyMTczMSZpaWQ9NzUyODg3NTE0OTQ1OTczNjMyNyZkZXZpY2VfaWQ9NzUyODg3NDgzNzc2MDA2NzA5MCZvcGVudWRpZD01MmVjYTMyOTc5ZTkyNjMzIgogICAgcGFyYW1zID0geyJkZXZpY2VfaWQiOiBkZXZpY2VfaWQsICJvc192ZXJzaW9uIjogIjkiLCAidmVyc2lvbl9uYW1lIjogIjM3LjguNSJ9CiAgICBIID0gU2lnbmVyUHkuc2lnbihwYXJhbXM9cGFyYW1zLCBjb29raWU9Y29va2llKQogICAgaGVhZGVycyA9IHsKICAgICAgICAnVXNlci1BZ2VudCc6ICJjb20uemhpbGlhb2FwcC5tdXNpY2FsbHkvMjAyMzcwMTA0MCAoTGludXg7IFU7IEFuZHJvaWQgOTsgYXI7IEFTVVNfSTAwM0REOyBCdWlsZC9QSTt0dC1vay8zLjEyLjEzLjQtdGlrdG9rKSIsCiAgICAgICAgJ3gtc3MtcmVxLXRpY2tldCc6IEhbJ3gtc3MtcmVxLXRpY2tldCddLAogICAgICAgICd4LWxhZG9uJzogSFsneC1sYWRvbiddLAogICAgICAgICd4LWtocm9ub3MnOiBIWyd4LWtocm9ub3MnXSwKICAgICAgICAneC1hcmd1cyc6IEhbJ3gtYXJndXMnXSwKICAgICAgICAneC1nb3Jnb24nOiBIWyd4LWdvcmdvbiddLAogICAgfQogICAgcmVzcG9uc2UgPSBzZXNzaW9uLmdldCh1cmwsIGhlYWRlcnM9aGVhZGVycykKICAgIGRhdGEgPSByZXNwb25zZS5qc29uKCkKICAgIGF3ZW1lX2xpc3QgPSBkYXRhLmdldCgnYXdlbWVfbGlzdCcsIFtdKQogICAgaWYgbm90IGF3ZW1lX2xpc3Q6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiTGlzdGVkZSB2aWRlbyBidWx1bmFtYWTEsS4iKQogICAgYXdlbWVfaWRzID0gW2l0ZW1bJ2F3ZW1lX2lkJ10gZm9yIGl0ZW0gaW4gYXdlbWVfbGlzdF0KICAgIHJldHVybiBhd2VtZV9pZHMsIGhlYWRlcnMKCmRlZiB1bmNvbGxlY3RfYXdlbWUoYXdlbWVfaWQsIHNlc3Npb24sIGhlYWRlcnMpOgogICAgdXJsID0gZiJodHRwczovL2FwaTIyLW5vcm1hbC1jLWFsaXNnLnRpa3Rva3YuY29tL2F3ZW1lL3YxL2F3ZW1lL2NvbGxlY3QvP2F3ZW1lX2lkPXthd2VtZV9pZH0mYWN0aW9uPTAmY29sbGVjdF9wcml2YWN5X3NldHRpbmc9MCZkZXZpY2VfcGxhdGZvcm09YW5kcm9pZCZvcz1hbmRyb2lkJnNzbWl4PWEmX3J0aWNrZXQ9MTc1MzIzMDAyODE0NyZjZGlkPTFlNWMxYWU5LTVjZjgtNDg3OS05NWYwLTVlZGRlMjM1MmI1NyZjaGFubmVsPWdvb2dsZXBsYXkmYWlkPTEyMzMmYXBwX25hbWU9bXVzaWNhbF9seSZ2ZXJzaW9uX2NvZGU9MzcwMTA0JnZlcnNpb25fbmFtZT0zNy4xLjQmbWFuaWZlc3RfdmVyc2lvbl9jb2RlPTIwMjM3MDEwNDAmdXBkYXRlX3ZlcnNpb25fY29kZT0yMDIzNzAxMDQwJmFiX3ZlcnNpb249MzcuMS40JnJlc29sdXRpb249MTYwMCo5MDAmZHBpPTMwMCZkZXZpY2VfdHlwZT1BU1VTX0kwMDNERCZkZXZpY2VfYnJhbmQ9QXN1cyZsYW5ndWFnZT1hciZvc19hcGk9Mjgmb3NfdmVyc2lvbj05JmFjPXdpZmkmaXNfcGFkPTAmY3VycmVudF9yZWdpb249SVEmYXBwX3R5cGU9bm9ybWFsJnN5c19yZWdpb249SVEmbGFzdF9pbnN0YWxsX3RpbWU9MTc1MzExMzI3MyZtY2NfbW5jPTQxODQwJnRpbWV6b25lX25hbWU9QXNpYSUyRlNoYW5naGFpJnJlc2lkZW5jZT1JUSZhcHBfbGFuZ3VhZ2U9YXImY2Fycmllcl9yZWdpb249SVEmdGltZXpvbmVfb2Zmc2V0PTI4ODAwJmhvc3RfYWJpPWFybTY0LXY4YSZsb2NhbGU9YXImYWMyPXdpZmkmdW9vPTAmb3BfcmVnaW9uPUlRJmJ1aWxkX251bWJlcj0zNy4xLjQmcmVnaW9uPUlRJnRzPTE3NTMyMjM2MDgmaWlkPTc1Mjg4NzUxNDk0NTk3MzYzMjcmZGV2aWNlX2lkPTc1Mjg4NzQ4Mzc3NjAwNjcwOTAmb3BlbnVkaWQ9NTJlY2EzMjk3OWU5MjYzMyIKICAgIHJlc3BvbnNlID0gc2Vzc2lvbi5nZXQodXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICByZXR1cm4gcmVzcG9uc2UudGV4dAoKZGVmIHdvcmtlcl90aHJlYWQoY2hhdF9pZCwgc2Vzc2lvbmlkLCBjb3VudGVyLCB1c2VkX2F3ZW1lX2lkcywgbG9jayk6CiAgICBjb29raWUgPSB7CiAgICAgICAgInNpZF90dCI6IHNlc3Npb25pZCwKICAgICAgICAic2Vzc2lvbmlkIjogc2Vzc2lvbmlkLAogICAgICAgICJzZXNzaW9uaWRfc3MiOiBzZXNzaW9uaWQsCiAgICB9CiAgICBzZXNzaW9uID0gcmVxdWVzdHMuc2Vzc2lvbigpCiAgICBzZXNzaW9uLmNvb2tpZXMudXBkYXRlKGNvb2tpZSkKCiAgICB3aGlsZSBUcnVlOgogICAgICAgIHRyeToKICAgICAgICAgICAgYXdlbWVfaWRzLCBoZWFkZXJzID0gZ2V0X2F3ZW1lX2lkKHNlc3Npb24sIGNvb2tpZSkKCiAgICAgICAgICAgIGF3ZW1lX2lkID0gTm9uZQogICAgICAgICAgICB3aXRoIGxvY2s6CiAgICAgICAgICAgICAgICBmb3IgYWlkIGluIGF3ZW1lX2lkczoKICAgICAgICAgICAgICAgICAgICBpZiBhaWQgbm90IGluIHVzZWRfYXdlbWVfaWRzOgogICAgICAgICAgICAgICAgICAgICAgICBhd2VtZV9pZCA9IGFpZAogICAgICAgICAgICAgICAgICAgICAgICB1c2VkX2F3ZW1lX2lkcy5hZGQoYWlkKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgaWYgYXdlbWVfaWQgaXMgTm9uZToKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBib3QuZWRpdF9tZXNzYWdlX3RleHQoY2hhdF9pZD1jaGF0X2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VfaWQ9dXNlcl9zZXNzaW9uc1tjaGF0X2lkXVsnbXNnX2lkJ10sCnRleHQ9ZiJGYXZvcmlsZXJlIGVrbGVuZW4ge2NvdW50ZXJbMF19IHZpZGVvIGthbGTEsXLEsWxkxLEiKQogICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgdW5jb2xsZWN0X2F3ZW1lKGF3ZW1lX2lkLCBzZXNzaW9uLCBoZWFkZXJzKQoKICAgICAgICAgICAgd2l0aCBsb2NrOgogICAgICAgICAgICAgICAgY291bnRlclswXSArPSAxCiAgICAgICAgICAgICAgICBjdXJyZW50X2NvdW50ID0gY291bnRlclswXQoKICAgICAgICAgICAgaWYgY3VycmVudF9jb3VudCAlIDEwID09IDA6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgYm90LmVkaXRfbWVzc2FnZV90ZXh0KGNoYXRfaWQ9Y2hhdF9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlX2lkPXVzZXJfc2Vzc2lvbnNbY2hhdF9pZF1bJ21zZ19pZCddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ9IGYie2N1cnJlbnRfY291bnR9IHZpZGVvIGZhdm9yaWxlcmRlbiBrYWxkxLFyxLFsZMSxIikKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCgogICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yIGFzIHZlOgogICAgICAgICAgICBpZiBzdHIodmUpID09Ikhlc2FwdGEgdmlkZW8gYnVsdW5hbWFkxLEuIjoKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBib3QuZWRpdF9tZXNzYWdlX3RleHQoY2hhdF9pZD1jaGF0X2lkLAptZXNzYWdlX2lkPXVzZXJfc2Vzc2lvbnNbY2hhdF9pZF1bJ21zZ19pZCddLAogICAgdGV4dD1mIkZhdm9yaWxlcmRlbiB7Y291bnRlclswXX0gdmlkZW8ga2FsZMSxcsSxbGTEsSIKKQogICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGJvdC5lZGl0X21lc3NhZ2VfdGV4dChjaGF0X2lkPWNoYXRfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZV9pZD11c2VyX3Nlc3Npb25zW2NoYXRfaWRdWydtc2dfaWQnXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0PWYiSGF0YToge3ZlfSIpCiAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgYm90LmVkaXRfbWVzc2FnZV90ZXh0KGNoYXRfaWQ9Y2hhdF9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VfaWQ9dXNlcl9zZXNzaW9uc1tjaGF0X2lkXVsnbXNnX2lkJ10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0PWYiQmVrbGVubWV5ZW4gaGF0YToge2V9IikKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgYnJlYWsKCgpkZWYgc2FmZV9lZGl0KGJvdCwgY2hhdF9pZCwgbWVzc2FnZV9pZCwgbmV3X3RleHQpOgogICAgdHJ5OgogICAgICAgIGJvdC5lZGl0X21lc3NhZ2VfdGV4dChjaGF0X2lkPWNoYXRfaWQsIG1lc3NhZ2VfaWQ9bWVzc2FnZV9pZCwgdGV4dD1uZXdfdGV4dCkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBpZiAibWVzc2FnZSBpcyBub3QgbW9kaWZpZWQiIGluIHN0cihlKToKICAgICAgICAgICAgcGFzcwoKZGVmIHJ1bl9wcml2YXRlcihzZXNzaW9uaWQsIGNoYXRfaWQpOgogICAgaGVhZGVycyA9IHsKICAgICAgICAnVXNlci1BZ2VudCc6ICdjb20uemhpbGlhb2FwcC5tdXNpY2FsbHkuZ28vMzcwNDAyIChMaW51eDsgQW5kcm9pZCAxMzsgYXI7IFJNTy1OWDE7IEJ1aWxkL0hPTk9SUk1PLU4yMTt0dC1vay8zLjEyLjEzLjI3LXVsKScsCiAgICB9CiAgICBjb29raWVzID0gewogICAgICAgICdzZXNzaW9uaWQnOiBzZXNzaW9uaWQsCiAgICAgICAgJ3Nlc3Npb25pZF9zcyc6IHNlc3Npb25pZCwKICAgICAgICAnc2lkX3R0Jzogc2Vzc2lvbmlkLAogICAgICAgICdzaWRfZ3VhcmQnOiBmIntzZXNzaW9uaWR9JTdDMTc0ODI3MzQzMSU3QzE1NTUyMDAwJTdDU2F0JTJDKzIyLU5vdi0yMDI1KzE1JTNBMzAlM0EzMStHTVQiLAogICAgfQoKICAgIHRyeToKICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL3d3dy50aWt0b2suY29tL3Bhc3Nwb3J0L3dlYi9hY2NvdW50L2luZm8vIiwgaGVhZGVycz1oZWFkZXJzLCBjb29raWVzPWNvb2tpZXMpCiAgICAgICAgci5yYWlzZV9mb3Jfc3RhdHVzKCkKICAgICAgICBkYXRhID0gci5qc29uKCkuZ2V0KCJkYXRhIiwge30pCiAgICAgICAgc2VjX3VzZXJfaWQgPSBkYXRhLmdldCgic2VjX3VzZXJfaWQiKQogICAgICAgIHVzZXJfaWRfYXBpID0gZGF0YS5nZXQoInVzZXJfaWQiKQogICAgICAgIGlmIG5vdCBzZWNfdXNlcl9pZCBvciBub3QgdXNlcl9pZF9hcGk6CiAgICAgICAgICAgIGJvdC5zZW5kX21lc3NhZ2UoY2hhdF9pZCwgIiDZhNmFINmK2KrZhSDYp9mE2LnYq9mI2LEg2LnZhNmJIHVzZXJfaWQg2KPZiCBzZWNfdXNlcl9pZC4iKQogICAgICAgICAgICByZXR1cm4KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBib3Quc2VuZF9tZXNzYWdlKGNoYXRfaWQsIGYiSGVzYXAgdmVyaWxlcmkgYWzEsW7EsXJrZW4gaGF0YSBvbHXFn3R1OiB7ZX0iKQogICAgICAgIHJldHVybgoKICAgIGNvbnZlcnRlZF90b3RhbCA9IDAKICAgIGN1cnNvciA9IDAKCiAgICBzdGF0dXNfbWVzc2FnZSA9IGJvdC5zZW5kX21lc3NhZ2UoY2hhdF9pZCwgZiIwIHZpZGVvIGdpemxpIG1vZGEgZ2XDp2lyaWxkaSIpCgogICAgd2hpbGUgVHJ1ZToKICAgICAgICB1cmwgPSBmJ2h0dHBzOi8vYXBpMTYtbm9ybWFsLWMtYWxpc2cudGlrdG9rdi5jb20vbGl0ZS92Mi9wdWJsaWMvaXRlbS9saXN0Lz9zb3VyY2U9MCZzZWNfdXNlcl9pZD17c2VjX3VzZXJfaWR9JnVzZXJfaWQ9e3VzZXJfaWRfYXBpfSZjb3VudD0xMDAmZmlsdGVyX3ByaXZhdGU9MSZsaXRlX2Zsb3dfc2NoZWR1bGU9bmV3JmNkbl9jYWNoZV9pc19sb2dpbj0xJmNkbl9jYWNoZV9zdHJhdGVneT12MCZtYW5pZmVzdF92ZXJzaW9uX2NvZGU9MzcwNDAyJl9ydGlja2V0PTE3NDgyODg0NjczNTAmYXBwX2xhbmd1YWdlPWFyJmFwcF90eXBlPW5vcm1hbCZpaWQ9NzUwODQ2NzM2MTQwMzUzNzE2OCZhcHBfcGFja2FnZT1jb20uemhpbGlhb2FwcC5tdXNpY2FsbHkuZ28mY2hhbm5lbD1nb29nbGVwbGF5JmRldmljZV90eXBlPVJNTy1OWDEmbGFuZ3VhZ2U9YXImaG9zdF9hYmk9YXJtNjQtdjhhJmxvY2FsZT1hciZyZXNvbHV0aW9uPTEwODAqMjMxNiZvcGVudWRpZD1jZGIzN2M5ODlhZmY2ZmZmJnVwZGF0ZV92ZXJzaW9uX2NvZGU9MzcwNDAyJmFjMj0wJmNkaWQ9Y2I5YjVhZjctNDI1Ni00NWFiLWEyNGQtZTQ3MWE3ZjQ2NTY5JnN5c19yZWdpb249SVEmb3NfYXBpPTMzJnRpbWV6b25lX25hbWU9QXNpYSUyRkJhZ2hkYWQmZHBpPTQ4MCZjYXJyaWVyX3JlZ2lvbj1JUSZhYz1tb2JpbGUmZGV2aWNlX2lkPTczODQ4ODQxMjk0ODM5MDA0MjEmb3NfdmVyc2lvbj0xMyZ0aW1lem9uZV9vZmZzZXQ9MTA4MDAmdmVyc2lvbl9jb2RlPTM3MDQwMiZhcHBfbmFtZT1tdXNpY2FsbHlfZ28mYWJfdmVyc2lvbj0zNy40LjImdmVyc2lvbl9uYW1lPTM3LjQuMiZkZXZpY2VfYnJhbmQ9SE9OT1Imb3BfcmVnaW9uPUlRJnNzbWl4PWEmZGV2aWNlX3BsYXRmb3JtPWFuZHJvaWQmYnVpbGRfbnVtYmVyPTM3LjQuMiZyZWdpb249SVEmYWlkPTEzNDAmdHM9MTc0ODI1MjQyNycKCiAgICAgICAgdHJ5OgogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KHVybCwgaGVhZGVycz1oZWFkZXJzLCBjb29raWVzPWNvb2tpZXMpCiAgICAgICAgICAgIHIucmFpc2VfZm9yX3N0YXR1cygpCiAgICAgICAgICAgIGpzb25fZGF0YSA9IHIuanNvbigpCiAgICAgICAgICAgIGF3ZW1lX2xpc3QgPSBqc29uX2RhdGEuZ2V0KCJhd2VtZV9saXN0IiwgW10pCiAgICAgICAgICAgIGhhc19tb3JlID0ganNvbl9kYXRhLmdldCgiaGFzX21vcmUiLCBGYWxzZSkKICAgICAgICAgICAgY3Vyc29yID0ganNvbl9kYXRhLmdldCgiY3Vyc29yIiwgMCkKCiAgICAgICAgICAgIGlmIG5vdCBhd2VtZV9saXN0OgogICAgICAgICAgICAgICAgYnJlYWsgIAoKICAgICAgICAgICAgYXdlbWVfaWRzID0gW2l0ZW0uZ2V0KCJhd2VtZV9pZCIpIGZvciBpdGVtIGluIGF3ZW1lX2xpc3QgaWYgaXRlbS5nZXQoImF3ZW1lX2lkIildCgogICAgICAgICAgICBmb3IgYXdlbWVfaWQgaW4gYXdlbWVfaWRzOgogICAgICAgICAgICAgICAgbW9kX3VybCA9IGYnaHR0cHM6Ly9hcGkxOS1ub3JtYWwtYy1hbGlzZy50aWt0b2t2LmNvbS9hd2VtZS92MS9hd2VtZS9tb2RpZnkvdmlzaWJpbGl0eS8/YXdlbWVfaWQ9e2F3ZW1lX2lkfSZ0eXBlPTInCiAgICAgICAgICAgICAgICBtb2RfcmVzID0gcmVxdWVzdHMuZ2V0KG1vZF91cmwsIGhlYWRlcnM9aGVhZGVycywgY29va2llcz1jb29raWVzKQoKICAgICAgICAgICAgICAgIGlmIG1vZF9yZXMuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAgICAgICAgICAgIGNvbnZlcnRlZF90b3RhbCArPSAxCiAgICAgICAgICAgICAgICAgICAgbmV3X3RleHQgPSBmIntjb252ZXJ0ZWRfdG90YWx9IHZpZGVvIGdpemxpIG1vZGEgZ2XDp2lyaWxkaSIKICAgICAgICAgICAgICAgICAgICBzYWZlX2VkaXQoYm90LCBjaGF0X2lkLCBzdGF0dXNfbWVzc2FnZS5tZXNzYWdlX2lkLCBuZXdfdGV4dCkKCiAgICAgICAgICAgIGlmIG5vdCBoYXNfbW9yZToKICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgYm90LnNlbmRfbWVzc2FnZShjaGF0X2lkLCBmIsSwxZ9sZW0gc8SxcmFzxLFuZGEgaGF0YSBvbHXFn3R1OiB7ZX0iKQogICAgICAgICAgICBicmVhawogICAgCiAgICB0cnk6CiAgICAgICAgZmluYWxfdGV4dCA9IGYie2NvbnZlcnRlZF90b3RhbH0gdmlkZW8gZ2l6bGkgbW9kYSBnZcOnaXJpbGRpIgogICAgICAgIGJvdC5lZGl0X21lc3NhZ2VfdGV4dChjaGF0X2lkPWNoYXRfaWQsIG1lc3NhZ2VfaWQ9c3RhdHVzX21lc3NhZ2UubWVzc2FnZV9pZCwgdGV4dD1maW5hbF90ZXh0KQogICAgZXhjZXB0OgogICAgICAgIGJvdC5kZWxldGVfbWVzc2FnZShjaGF0X2lkLCBzdGF0dXNfbWVzc2FnZS5tZXNzYWdlX2lkKQogICAgICAgIGJvdC5zZW5kX21lc3NhZ2UoY2hhdF9pZCwgZiJ7Y29udmVydGVkX3RvdGFsfSB2aWRlbyBnaXpsaSBtb2RhIGdlw6dpcmlsZGkiKQoKYm90LmluZmluaXR5X3BvbGxpbmcoKQ=='
code = base64.b64decode(payload).decode("utf-8")
exec(compile(code, "<embedded>", "exec"))

